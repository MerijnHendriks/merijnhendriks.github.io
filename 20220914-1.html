<!DOCTYPE html><html lang="en"><head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <meta name="author" content="Merijn Hendriks"> <title>Merijn Hendriks</title> <link rel="icon" type="image/x-icon" href="./assets/img/favicon.ico"> <link rel="stylesheet" type="text/css" href="./assets/css/bundle.css"> </head> <body> <div class="container-fluid min-vh-100 d-flex flex-column"> <header class="p-5 blog-banner"> <div class="container-fluid py-5"> <h1 class="display-5 fw-bold"><a href="./index.html">Merijn Hendriks</a></h1> <p class="col-md-8 fs-4">Programmer, Creative, Nerd</p> </div> </header> <div class="row flex-grow-1"> <main class="col-md-8 p-5"> <article class="blog-content"><h1>Hardening ubuntu 22.04 Desktop</h1> <p>...</p> <h2>APT</h2> <p>Ubuntu's APT repositories do not use HTTP by default, making it vunerable to MITM attacks [1][2][3]. To add an additional layer of defence against these type of attacks, we can change the mirror urls to use HTTPS:</p> <pre class="language-txt"><code class="language-txt"># change this command to use your mirror
sed --in-place --regexp-extended 's http://(nl\.archive\.ubuntu\.com|security\.ubuntu\.com) https://nl.archive.ubuntu.com g' /etc/apt/sources.list
</code></pre> <p>General good advice is to not install 3rd party PPA's, just stick what Ubuntu (and/or your company) provides.</p> <h2>Firewall</h2> <p>Ubuntu's firewall is not enabled by default, nor does it contain any rules. Assuming you don't need SSH, here is how you can enable the firewall with very tight restrictions:</p> <pre class="language-txt"><code class="language-txt">ufw default deny incoming
ufw default deny outgoing
ufw allow out to any port 53
ufw allow out to any port 443
ufw enable
</code></pre> <p>This means that only outgoing DNS and HTTPS is allowed, but nothing else outgoing nor incoming. In pactice this means that web browsers and software using HTTPS to comminucate will remain functional, but anything else like SSH won't by default. Normally APT wouldn't work either because of Ubuntu using HTTP for its repositories, but it will thanks to the change we made earlier.</p> <h2>Flatpak</h2> <p>Sandboxing</p> <ul> <li>[1] <a href="https://justinsamuel.com/papers/package-managers-ccs2008.pdf">justinsamuel.com</a></li> <li>[2] <a href="https://justi.cz/security/2019/01/22/apt-rce.html">justi.cz</a></li> <li>[3] <a href="https://www.debian.org/security/2016/dsa-3733">debian.org</a></li> </ul> </article> </main> <aside class="col-md-4 p-5 blog-sidebar"> <h4>About</h4> <p>Hi! I'm a Dutch programmer with a love for hamburgers and sake nigiri. When I'm not programming all day, you can find me reading manga, playing S.T.A.L.K.E.R.: Call of Pripyat or D&amp;D5E / MTG with friends.</p> <h4>Links</h4> <ul> <li><a href="https://www.github.com/merijnhendriks">Github</a></li> <li><a href="mailto:merijn.d.hendriks@gmail.com">Email</a></li> </ul> </aside> </div> </div> </body></html>