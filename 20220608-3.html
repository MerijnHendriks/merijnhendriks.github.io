<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <meta name="author" content="No;Hurry"> <meta name="description" content="My personal blog."> <title>No;Hurry</title> <link rel="icon" type="image/x-icon" href="./assets/img/favicon.ico"> <link rel="stylesheet" type="text/css" href="./assets/css/bundle.css"> </head> <body> <div class="container-fluid d-flex flex-column"> <div class="row flex-grow-1"> <aside class="col-lg-3 blog-sidebar"> <div class="container-fluid py-5 blog-banner"> <h1 class="fw-bold"><a href="./index.html">No;Hurry</a></h1> <p class="fs-4">Programmer, Creative, Nerd</p> </div> <div class="p-5"> <h4>About</h4> <p>Hi! My name is Merijn Hendriks and I'm a Dutch programmer with a love for hamburgers and sake nigiri. When I'm not programming all day, you can find me reading manga, playing S.T.A.L.K.E.R.: Call of Pripyat or D&D5E / MTG with friends.</p> <h4>Links</h4> <ul> <li><a href="https://www.github.com/merijnhendriks">Github</a></li><li><a href="mailto:me@nohurry.moe">Email</a></li><li><a href="https://nohurry.moe/feed.rss">RSS</a></li> </ul> </div> </aside> <main class="col-lg-9 p-5 offset-lg-3"> <article> <h1>C89-DP: Singleton</h1> <p>This one is gonna be short since there realy isn't much to it.</p> <h2>Example</h2> <pre class="language-c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Foo</span> Foo<span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">Foo</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Foo<span class="token operator">*</span> <span class="token function">Foo_getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">static</span> Foo instance <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>instance<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <p>Only thing I need to note is that it's safe to take the reference of <code>instance</code> since it's stored in the static register. Besides that, the rest of the program works as expected. I could've instead opted for using <code>extern</code>, but I think this looks a little cleaner as I only expose what I want to expose.</p> <h2>Usage</h2> <pre class="language-c"><code class="language-c">Foo<span class="token operator">*</span> foo <span class="token operator">=</span> <span class="token function">Foo_getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <h2>Conclusion</h2> <p>It absolutely can be done, in many ways even.</p> </article> </main> </div> </div> </body> </html>